openapi: 3.0.0
info:
  title: Evidence
  description: |
   API specs for uploading artifacts/marking as evidence etc..Chain of custody and other details of evidence history are not handled in this version. Artifacts can be uploaded voluntarily or because of an order or hearing. They can be marked as "EVIDENCE" by the judge anytime during the course of a case. This is modeled as workflow.
  version: 0.1.0
tags:
  - name: Evidence
    description: APIs required to upload digital artifacts for evidence consideration
  
paths:
  /artifacts/v1/_create:
    post:
      tags:
        - Evidence
      summary: Upload artifacts that could potentially be accepted as evidence
      description: |
        API used to create a new artifact that could become evidence in a case
      requestBody:
        description: Details for the artifact + RequestInfo meta data.
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/EvidenceRequest'
        required: true
      responses:
        '201':
          description: ReponseInfo with artifact(s) updated sucessfully
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/EvidenceResponse'
        '400':
          description: Artifact(s) creation failed
          content:
            '*/*':
              schema:
                $ref: >-
                  https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/ErrorResponse
      x-codegen-request-body-name: ArtifactRequest
  /artifacts/v1/_update:
    post:
      tags:
        - Evidence
      summary: Update evidence request
      requestBody:
        description: Details for the artifact to be updated + RequestInfo meta data.
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/EvidenceRequest'
        required: true
      responses:
        '201':
          description: ReponseInfo with case(s) updated successfully
          content:
            '*/*':
              schema:
                $ref: >-
                 #/components/schemas/EvidenceResponse
        '400':
          description: Case(s) updation failed
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/ErrorResponse'
  /artifacts/v1/_search:
    post:
      tags:
        - Evidence
      summary: Search for artifacts
      description: |
        API used to search  artifacts using search criteria
      requestBody:
        description: Search criteria for artifcat + RequestInfo meta data.
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/EvidenceSearchRequest'
        required: true
      responses:
        '201':
          description: ReponseInfo with artifact(s) updated sucessfully
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/EvidenceSearchResponse'
        '400':
          description: Artifact(s) creation failed
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/ErrorResponse'
      x-codegen-request-body-name: ArtifactRequest
components:
  schemas:
    Artifact:
      required: [tenantId, caseId]
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: This id is autogenerated id of the artifact. It is the primary key
          readOnly: true
          minLength: 36
          maxLength: 36
        tenantId:
          type: string
          description: This is tenantId of the case based on the state.
        artifactNumber:
          type: string
          description: Identification number assigned when an artifact is uploaded
          minLength: 2
          maxLength: 64
        evidenceNumber:
          type: string
          description: Formatted evidence number assigned after evidence is accepted by the deciding authority.
          minLength: 2
          maxLength: 64
        externalRefNumber:
          type: string
          description: Reference to a physical artifact or other evidence collected during the course of an investigation
          minLength: 2
          maxLength: 128
        caseId:
          type: string
          description: Reference to the case UUID from the CourtCase entity
        application:
          type: string
          description: Application number with which this evidence is associated
        hearing:
          type: string
          description: Reference to the hearing where evidence could've been introduced.
        order:
          type: string
          description: Reference to the order that led to uploading this artifact
        mediaType:
          type: string
          description: Represents the type of artifact, such as audio, video, document, etc..
          example: AUDIO, VIDEO, DOC
        artifactType:
          type: string
          description: Represents the legal classification of the artifact, such as sworn statement, affidavit, testimony, etc.
          example: AFFIDAVIT, DEPOSITION, SWORN_STATEMENT, OTHER etc.. 
        sourceID:
          type: string
          description: The individual ID of the person who provided this artifact. In case of Person A providing an affidavit, this will be the individual ID of Person A.
        sourceName:
          type: string
          description: Users who may not be part of the system who've given evidence. SourceID or name is mandatory
          example: Mr. Sundar, Assistant DGP
        applicableTo:
          type: array
          description: An array of individualIds of the litigants for whom this evidence has been provided. 
          items:
            type: string
        createdDate:
          type: integer
          format: date
          description: Date this artifact was created. This may be different from the upload time which will be captured in the audit details.
        isActive:
          type: boolean
          description: Field to indicate soft delete of records. True if record is active, false if not.
          default: true
        status:
          type: string
          description: >-
            The current status of the case as pulled from the Workflow service.
            Workflow service will hold the entire history of the case.
        file:
          $ref: >-
              https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/Document
        description:
          type: string
          description: Field that describes the artifact and its relevance to the case.
        artifactDetails:
          type: object
          description: Each evidence type may have specific fields depending on case type. 
        comments:
          type: array
          description: An array of comments representing the discussion between the parties of the case on this specific artifact.
          items:
            $ref: '#/components/schemas/Comment'
        additionalDetails:
          type: string
          description: >-
            This field is meant to hold any extra information that we want to
            store for a case.
        auditdetails:
          $ref: >-
            https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails
        workflow:
          $ref: >-
            https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/Workflow
    
    Comment:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: This id is autogenerated id of the artifact. It is the primary key
          readOnly: true
          minLength: 36
          maxLength: 36
        tenantId:
          type: string
          description: This is tenantId of the case based on the state.
        artifactId:
          type: string
          description: Refers to the artifact UUID that this is related to
        individualId:
          type: string
          description: The individual who is commenting on the artifact. In case lawyers do this on behalf of litigants, the individualId will be that of the litigant. The representative who's performing actions on behalf of will be captured in the audit details.
        comment:
          type: string
          description: Comments/responses from the user
          minLength: 2
          maxLength: 2048
        isActive:
          type: boolean
          description: Field to indicate soft delete of records
          default: true
        additionalDetails:
          type: string
          description: >-
            This field is meant to hold any extra information that we want to
            store for this entity.
        auditdetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails'
      required: [tenantId, artifactId, individualId, comment]
   
    EvidenceRequest:
      type: object
      properties:
        RequestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
        artifacts:
          type: array
          items:
            $ref: '#/components/schemas/Artifact'
    EvidenceResponse:
      type: object
      properties:
        ResponseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/ResponseInfo'
        artifacts:
          type: array
          items:
            $ref: '#/components/schemas/Artifact'
        pagination:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/Pagination'
    EvidenceSearchRequest:
      type: object
      properties:
        RequestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
        tenantid: 
          type: string
        criteria:
          $ref: '#/components/schemas/EvidenceSearchCriteria'
          
    EvidenceSearchResponse:
      type: object
      properties:
        ResponseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/common-contract-update/Common%20Services/common-contract.yaml#/components/schemas/ResponseInfo'
        tenantid: 
          type: string    
        criteria:
          $ref: '#/components/schemas/EvidenceSearchCriteria'
          
    EvidenceSearchCriteria:
      type: object
      description: the fields specified will be used in a logical AND condition
      properties:
        caseId:
          type: string
        applicationId:
          type: string
        hearing:
          type: string
        order:
          type: string
        sourceid:
          type: string
        sourcename:
          type: string
        status:
          type: string
        responseList:
          type: array
          description: his is an output field and will contain the list of artifacts found as per the search criteria
          items:
            $ref: '#/components/schemas/Artifact'
        
