(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var gr=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},U="1.9.0",oe=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Or(t){var e=new Set([t]),r=new Set,n=t.match(oe);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(s){return s===t};function o(u){return r.add(u),!1}function a(u){return e.add(u),!0}return function(s){if(e.has(s))return!0;if(r.has(s))return!1;var c=s.match(oe);if(!c)return o(s);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||i.major!==f.major?o(s):i.major===0?i.minor===f.minor&&i.patch<=f.patch?a(s):o(s):i.minor<=f.minor?a(s):o(s)}}var Sr=Or(U),mr=U.split(".")[0],tt=Symbol.for("opentelemetry.js.api."+mr),et=gr;function rt(t,e,r,n){var i;n===void 0&&(n=!1);var o=et[tt]=(i=et[tt])!==null&&i!==void 0?i:{version:U};if(!n&&o[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(o.version!==U){var a=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+U);return r.error(a.stack||a.message),!1}return o[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+U+"."),!0}function G(t){var e,r,n=(e=et[tt])===null||e===void 0?void 0:e.version;if(!(!n||!Sr(n)))return(r=et[tt])===null||r===void 0?void 0:r[t]}function nt(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+U+".");var r=et[tt];r&&delete r[t]}var Ar=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Rr=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Lr=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return K("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return K("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return K("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return K("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return K("verbose",this._namespace,e)},t}();function K(t,e,r){var n=G("diag");if(n)return r.unshift(e),n[t].apply(n,Rr([],Ar(r),!1))}var E;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(E||(E={}));function Pr(t,e){t<E.NONE?t=E.NONE:t>E.ALL&&(t=E.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",E.ERROR),warn:r("warn",E.WARN),info:r("info",E.INFO),debug:r("debug",E.DEBUG),verbose:r("verbose",E.VERBOSE)}}var br=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Nr=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Cr="diag",P=function(){function t(){function e(i){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=G("diag");if(u)return u[i].apply(u,Nr([],br(o),!1))}}var r=this,n=function(i,o){var a,u,s;if(o===void 0&&(o={logLevel:E.INFO}),i===r){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=c.stack)!==null&&a!==void 0?a:c.message),!1}typeof o=="number"&&(o={logLevel:o});var f=G("diag"),_=Pr((u=o.logLevel)!==null&&u!==void 0?u:E.INFO,i);if(f&&!o.suppressOverrideMessage){var l=(s=new Error().stack)!==null&&s!==void 0?s:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+l),_.warn("Current logger will overwrite one already registered from "+l)}return rt("diag",_,r,!0)};r.setLogger=n,r.disable=function(){nt(Cr,r)},r.createComponentLogger=function(i){return new Lr(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),wr=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Ir=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mr=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=wr(e,2),n=r[0],i=r[1];return[n,i]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=new t(this._entries);try{for(var a=Ir(n),u=a.next();!u.done;u=a.next()){var s=u.value;o._entries.delete(s)}}catch(c){e={error:c}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}(),xr=Symbol("BaggageEntryMetadata"),Dr=P.instance();function Ur(t){return t===void 0&&(t={}),new Mr(new Map(Object.entries(t)))}function Br(t){return typeof t!="string"&&(Dr.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:xr,toString:function(){return t}}}function Wt(t){return Symbol.for(t)}var Gr=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),M=new Gr,j=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jr=function(){function t(){}return t.prototype.createGauge=function(e,r){return Wr},t.prototype.createHistogram=function(e,r){return Zr},t.prototype.createCounter=function(e,r){return $r},t.prototype.createUpDownCounter=function(e,r){return Qr},t.prototype.createObservableGauge=function(e,r){return Jr},t.prototype.createObservableCounter=function(e,r){return qr},t.prototype.createObservableUpDownCounter=function(e,r){return tn},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),At=function(){function t(){}return t}(),Vr=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(At),Xr=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(At),Hr=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(At),Fr=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(At),Zt=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),kr=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Zt),zr=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Zt),Kr=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Zt),Yr=new jr,$r=new Vr,Wr=new Hr,Zr=new Fr,Qr=new Xr,qr=new kr,Jr=new zr,tn=new Kr,en={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},rn={set:function(t,e,r){t!=null&&(t[e]=r)}},nn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},on=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},an=function(){function t(){}return t.prototype.active=function(){return M},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,on([n],nn(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),un=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},sn=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},bt="context",cn=new an,Rt=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return rt(bt,e,P.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return(i=this._getContextManager()).with.apply(i,sn([e,r,n],un(o),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return G(bt)||cn},t.prototype.disable=function(){this._getContextManager().disable(),nt(bt,P.instance())},t}(),N;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(N||(N={}));var Le="0000000000000000",Pe="00000000000000000000000000000000",be={traceId:Pe,spanId:Le,traceFlags:N.NONE},Q=function(){function t(e){e===void 0&&(e=be),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}(),Qt=Wt("OpenTelemetry Context Key SPAN");function qt(t){return t.getValue(Qt)||void 0}function fn(){return qt(Rt.getInstance().active())}function Jt(t,e){return t.setValue(Qt,e)}function _n(t){return t.deleteValue(Qt)}function ln(t,e){return Jt(t,new Q(e))}function Ne(t){var e;return(e=qt(t))===null||e===void 0?void 0:e.spanContext()}var pn=/^([0-9a-f]{32})$/i,dn=/^[0-9a-f]{16}$/i;function Ce(t){return pn.test(t)&&t!==Pe}function hn(t){return dn.test(t)&&t!==Le}function Lt(t){return Ce(t.traceId)&&hn(t.spanId)}function En(t){return new Q(t)}var Nt=Rt.getInstance(),we=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=Nt.active());var i=!!(r!=null&&r.root);if(i)return new Q;var o=n&&Ne(n);return vn(o)&&Lt(o)?new Q(o):new Q},t.prototype.startActiveSpan=function(e,r,n,i){var o,a,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(o=r,u=n):(o=r,a=n,u=i);var s=a??Nt.active(),c=this.startSpan(e,o,s),f=Jt(s,c);return Nt.with(f,u,void 0,c)}},t}();function vn(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var Tn=new we,yn=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Tn},t}(),gn=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new we},t}(),On=new gn,ae=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new yn(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:On},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}(),dt;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(dt||(dt={}));var Xt;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Xt||(Xt={}));var Ht;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Ht||(Ht={}));var g=Rt.getInstance(),p=P.instance(),Sn=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return Yr},t}(),mn=new Sn,Ct="metrics",An=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return rt(Ct,e,P.instance())},t.prototype.getMeterProvider=function(){return G(Ct)||mn},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){nt(Ct,P.instance())},t}(),Ie=An.getInstance(),Rn=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}(),te=Wt("OpenTelemetry Baggage Key");function Me(t){return t.getValue(te)||void 0}function Ln(){return Me(Rt.getInstance().active())}function Pn(t,e){return t.setValue(te,e)}function bn(t){return t.deleteValue(te)}var wt="propagation",Nn=new Rn,Cn=function(){function t(){this.createBaggage=Ur,this.getBaggage=Me,this.getActiveBaggage=Ln,this.setBaggage=Pn,this.deleteBaggage=bn}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return rt(wt,e,P.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=rn),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=en),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){nt(wt,P.instance())},t.prototype._getGlobalPropagator=function(){return G(wt)||Nn},t}(),q=Cn.getInstance(),It="trace",wn=function(){function t(){this._proxyTracerProvider=new ae,this.wrapSpanContext=En,this.isSpanContextValid=Lt,this.deleteSpan=_n,this.getSpan=qt,this.getActiveSpan=fn,this.getSpanContext=Ne,this.setSpan=Jt,this.setSpanContext=ln}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=rt(It,this._proxyTracerProvider,P.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return G(It)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){nt(It,P.instance()),this._proxyTracerProvider=new ae},t}(),T=wn.getInstance(),xe=Wt("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function In(t){return t.setValue(xe,!0)}function ee(t){return t.getValue(xe)===!0}var Mn="=",Ft=";",ht=",",Mt="baggage",xn=180,Dn=4096,Un=8192,Bn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};function Gn(t){return t.reduce(function(e,r){var n=""+e+(e!==""?ht:"")+r;return n.length>Un?e:n},"")}function jn(t){return t.getAllEntries().map(function(e){var r=Bn(e,2),n=r[0],i=r[1],o=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=Ft+i.metadata.toString()),o})}function De(t){var e=t.split(Ft);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(Mn);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),o=decodeURIComponent(r.substring(n+1).trim()),a;return e.length>0&&(a=Br(e.join(Ft))),{key:i,value:o,metadata:a}}}}}function Ue(t){return typeof t!="string"||t.length===0?{}:t.split(ht).map(function(e){return De(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var Vn=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=q.getBaggage(e);if(!(!i||ee(e))){var o=jn(i).filter(function(u){return u.length<=Dn}).slice(0,xn),a=Gn(o);a.length>0&&n.set(r,Mt,a)}},t.prototype.extract=function(e,r,n){var i=n.get(r,Mt),o=Array.isArray(i)?i.join(ht):i;if(!o)return e;var a={};if(o.length===0)return e;var u=o.split(ht);return u.forEach(function(s){var c=De(s);if(c){var f={value:c.value};c.metadata&&(f.metadata=c.metadata),a[c.key]=f}}),Object.entries(a).length===0?e:q.setBaggage(e,q.createBaggage(a))},t.prototype.fields=function(){return[Mt]},t}(),Be=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};function ct(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=Be(Object.entries(t)),o=i.next();!o.done;o=i.next()){var a=Xn(o.value,2),u=a[0],s=a[1];if(!Hn(u)){p.warn("Invalid attribute key: "+u);continue}if(!Ge(s)){p.warn("Invalid attribute value set for key: "+u);continue}Array.isArray(s)?n[u]=s.slice():n[u]=s}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function Hn(t){return typeof t=="string"&&t.length>0}function Ge(t){return t==null?!0:Array.isArray(t)?Fn(t):je(t)}function Fn(t){var e,r,n;try{for(var i=Be(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(a!=null){if(!n){if(je(a)){n=typeof a;continue}return!1}if(typeof a!==n)return!1}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function je(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function kn(){return function(t){p.error(zn(t))}}function zn(t){return typeof t=="string"?t:JSON.stringify(Kn(t))}function Kn(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var Yn=kn();function Et(t){try{Yn(t)}catch{}}var R;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(R||(R={}));var $n=",",Wn=["OTEL_SDK_DISABLED"];function Zn(t){return Wn.indexOf(t)>-1}var Qn=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function qn(t){return Qn.indexOf(t)>-1}var Jn=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function ti(t){return Jn.indexOf(t)>-1}var ft=1/0,_t=128,ei=128,ri=128,Ve={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:E.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:ft,OTEL_ATTRIBUTE_COUNT_LIMIT:_t,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:ft,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:_t,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:ft,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:_t,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:ei,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:ri,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:R.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function ni(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function ii(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function oi(t,e,r,n){n===void 0&&(n=$n);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(o){return o.trim()}))}var ai={ALL:E.ALL,VERBOSE:E.VERBOSE,DEBUG:E.DEBUG,INFO:E.INFO,WARN:E.WARN,ERROR:E.ERROR,NONE:E.NONE};function ui(t,e,r){var n=r[t];if(typeof n=="string"){var i=ai[n.toUpperCase()];i!=null&&(e[t]=i)}}function Xe(t){var e={};for(var r in Ve){var n=r;switch(n){case"OTEL_LOG_LEVEL":ui(n,e,t);break;default:if(Zn(n))ni(n,e,t);else if(qn(n))ii(n,e,t);else if(ti(n))oi(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}var He=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function v(){var t=Xe(He);return Object.assign({},Ve,t)}function si(){return Xe(He)}function ue(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function re(t){for(var e=new Uint8Array(t.length/2),r=0,n=0;n<t.length;n+=2){var i=ue(t.charCodeAt(n)),o=ue(t.charCodeAt(n+1));e[r++]=i<<4|o}return e}var L=performance,ci="1.25.1",fi="exception.type",_i="exception.message",li="exception.stacktrace",pi="http.url",di="http.user_agent",hi="http.response_content_length",Ei="http.response_content_length_uncompressed",xt=fi,Dt=_i,vi=li,Ut=pi,Ti=di,yi=hi,gi=Ei,Oi="process.runtime.name",Si="service.name",mi="telemetry.sdk.name",Ai="telemetry.sdk.language",Ri="telemetry.sdk.version",Li=Oi,Pi=Si,kt=mi,zt=Ai,Kt=Ri,bi="webjs",Ni=bi,V,Bt=(V={},V[kt]="opentelemetry",V[Li]="browser",V[zt]=Ni,V[Kt]=ci,V);var Ci=9,wi=6,Ii=Math.pow(10,wi),vt=Math.pow(10,Ci);function H(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*Ii);return[r,n]}function Fe(){var t=L.timeOrigin;if(typeof t!="number"){var e=L;t=e.timing&&e.timing.fetchStart}return t}function ke(t){var e=H(Fe()),r=H(typeof t=="number"?t:L.now());return Ke(e,r)}function Mi(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=vt),[r,n]}function xi(t){return t[0]*vt+t[1]}function ze(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function se(t){return ze(t)||typeof t=="number"||t instanceof Date}function Ke(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=vt&&(r[1]-=vt,r[0]+=1),r}var B;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(B||(B={}));var Di=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ui=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,o;try{for(var a=Di(this._propagators),u=a.next();!u.done;u=a.next()){var s=u.value;try{s.inject(e,r,n)}catch(c){p.warn("Failed to inject with "+s.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(a){p.warn("Failed to inject with "+o.constructor.name+". Err: "+a.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}(),Yt="[_0-9a-z-*/]",Bi="[a-z]"+Yt+"{0,255}",Gi="[a-z0-9]"+Yt+"{0,240}@[a-z]"+Yt+"{0,13}",ji=new RegExp("^(?:"+Bi+"|"+Gi+")$"),Vi=/^[ -~]{0,255}[!-~]$/,Xi=/,|=/;function Hi(t){return ji.test(t)}function Fi(t){return Vi.test(t)&&!Xi.test(t)}var ce=32,ki=512,fe=",",_e="=",zi=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+_e+e.get(n)),r},[]).join(fe)},t.prototype._parse=function(e){e.length>ki||(this._internalState=e.split(fe).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(_e);if(o!==-1){var a=i.slice(0,o),u=i.slice(o+1,n.length);Hi(a)&&Fi(u)&&r.set(a,u)}return r},new Map),this._internalState.size>ce&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,ce))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}(),lt="traceparent",Gt="tracestate",Ki="00",Yi="(?!ff)[\\da-f]{2}",$i="(?![0]{32})[\\da-f]{32}",Wi="(?![0]{16})[\\da-f]{16}",Zi="[\\da-f]{2}",Qi=new RegExp("^\\s?("+Yi+")-("+$i+")-("+Wi+")-("+Zi+")(-.*)?\\s?$");function qi(t){var e=Qi.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var Ji=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=T.getSpanContext(e);if(!(!i||ee(e)||!Lt(i))){var o=Ki+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||N.NONE).toString(16);n.set(r,lt,o),i.traceState&&n.set(r,Gt,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,lt);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;var a=qi(o);if(!a)return e;a.isRemote=!0;var u=n.get(r,Gt);if(u){var s=Array.isArray(u)?u.join(","):u;a.traceState=new zi(typeof s=="string"?s:void 0)}return T.setSpanContext(e,a)},t.prototype.fields=function(){return[lt,Gt]},t}(),to="[object Object]",eo="[object Null]",ro="[object Undefined]",no=Function.prototype,Ye=no.toString,io=Ye.call(Object),oo=ao(Object.getPrototypeOf,Object),$e=Object.prototype,We=$e.hasOwnProperty,x=Symbol?Symbol.toStringTag:void 0,Ze=$e.toString;function ao(t,e){return function(r){return t(e(r))}}function le(t){if(!uo(t)||so(t)!==to)return!1;var e=oo(t);if(e===null)return!0;var r=We.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Ye.call(r)===io}function uo(t){return t!=null&&typeof t=="object"}function so(t){return t==null?t===void 0?ro:eo:x&&x in Object(t)?co(t):fo(t)}function co(t){var e=We.call(t,x),r=t[x],n=!1;try{t[x]=void 0,n=!0}catch{}var i=Ze.call(t);return n&&(e?t[x]=r:delete t[x]),i}function fo(t){return Ze.call(t)}var _o=20;function lo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=Qe(r,t.shift(),0,n);return r}function jt(t){return Tt(t)?t.slice():t}function Qe(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>_o)){if(r++,pt(t)||pt(e)||qe(e))i=jt(e);else if(Tt(t)){if(i=t.slice(),Tt(e))for(var o=0,a=e.length;o<a;o++)i.push(jt(e[o]));else if(Y(e))for(var u=Object.keys(e),o=0,a=u.length;o<a;o++){var s=u[o];i[s]=jt(e[s])}}else if(Y(t))if(Y(e)){if(!po(t,e))return e;i=Object.assign({},t);for(var u=Object.keys(e),o=0,a=u.length;o<a;o++){var s=u[o],c=e[s];if(pt(c))typeof c>"u"?delete i[s]:i[s]=c;else{var f=i[s],_=c;if(pe(t,s,n)||pe(e,s,n))delete i[s];else{if(Y(f)&&Y(_)){var l=n.get(f)||[],O=n.get(_)||[];l.push({obj:t,key:s}),O.push({obj:e,key:s}),n.set(f,l),n.set(_,O)}i[s]=Qe(i[s],c,r,n)}}}}else i=e;return i}}function pe(t,e,r){for(var n=r.get(t[e])||[],i=0,o=n.length;i<o;i++){var a=n[i];if(a.key===e&&a.obj===t)return!0}return!1}function Tt(t){return Array.isArray(t)}function qe(t){return typeof t=="function"}function Y(t){return!pt(t)&&!Tt(t)&&!qe(t)&&typeof t=="object"}function pt(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function po(t,e){return!(!le(t)||!le(e))}var ho=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}(),Eo=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},vo=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Je=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new ho}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,vo([this._that],Eo(n),!1))).then(function(o){return r._deferred.resolve(o)},function(o){return r._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},t}(),To="exception",yo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},de=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},go=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Oo=function(){function t(e,r,n,i,o,a,u,s,c,f){u===void 0&&(u=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Ht.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=a,this.kind=o,this.links=u;var _=Date.now();this._performanceStartTime=L.now(),this._performanceOffset=_-(this._performanceStartTime+Fe()),this._startTimeProvided=s!=null,this.startTime=this._getTime(s??_),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,f!=null&&this.setAttributes(f),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(p.warn("Invalid attribute key: "+e),this):Ge(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(p.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=yo(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=de(o.value,2),u=a[0],s=a[1];this.setAttribute(u,s)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return p.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&p.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),se(r)&&(se(n)||(n=r),r=void 0);var i=ct(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.addLink=function(e){return this.links.push(e),this},t.prototype.addLinks=function(e){var r;return(r=this.links).push.apply(r,go([],de(e),!1)),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){p.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=Mi(this.startTime,this.endTime),this._duration[0]<0&&(p.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&p.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<L.now())return ke(e+this._performanceOffset);if(typeof e=="number")return H(e);if(e instanceof Date)return H(e.getTime());if(ze(e))return e;if(this._startTimeProvided)return H(Date.now());var r=L.now()-this._performanceStartTime;return Ke(this.startTime,H(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[Dt]=e:e&&(e.code?n[xt]=e.code.toString():e.name&&(n[xt]=e.name),e.message&&(n[Dt]=e.message),e.stack&&(n[vi]=e.stack)),n[xt]||n[Dt]?this.addEvent(To,n,r):p.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&p.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(p.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}(),z;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(z||(z={}));var yt=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:z.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),k=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:z.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),Vt=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(Et(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new k),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new k,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new yt,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new k,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new yt}return t.prototype.shouldSample=function(e,r,n,i,o,a){var u=T.getSpanContext(e);return!u||!Lt(u)?this._root.shouldSample(e,r,n,i,o,a):u.isRemote?u.traceFlags&N.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,a):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,a):u.traceFlags&N.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,a):this._localParentNotSampled.shouldSample(e,r,n,i,o,a)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}(),he=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Ce(r)&&this._accumulate(r)<this._upperBound?z.RECORD_AND_SAMPLED:z.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}(),So=v(),mo=R.AlwaysOn,X=1;function tr(){return{sampler:er(So),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:v().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:v().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:v().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:v().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:v().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:v().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:v().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:v().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function er(t){switch(t===void 0&&(t=v()),t.OTEL_TRACES_SAMPLER){case R.AlwaysOn:return new k;case R.AlwaysOff:return new yt;case R.ParentBasedAlwaysOn:return new Vt({root:new k});case R.ParentBasedAlwaysOff:return new Vt({root:new yt});case R.TraceIdRatio:return new he(Ee(t));case R.ParentBasedTraceIdRatio:return new Vt({root:new he(Ee(t))});default:return p.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+mo+'".'),new k}}function Ee(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return p.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+X+"."),X;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(p.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+X+"."),X):e<0||e>1?(p.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+X+"."),X):e}function Ao(t){var e={sampler:er()},r=tr(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function Ro(t){var e,r,n,i,o,a,u,s,c,f,_,l,O=Object.assign({},t.spanLimits),h=si();return O.attributeCountLimit=(a=(o=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:h.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:_t,O.attributeValueLengthLimit=(l=(_=(f=(s=(u=t.spanLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&s!==void 0?s:(c=t.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&f!==void 0?f:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&_!==void 0?_:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&l!==void 0?l:ft,Object.assign({},t,{spanLimits:O})}var Lo=function(){function t(e,r){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=v();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Je(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(p.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&N.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&p.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(p.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),a=0,u=o;a<u;a++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);g.with(In(g.active()),function(){var o;e._finishedSpans.length<=e._maxExportBatchSize?(o=e._finishedSpans,e._finishedSpans=[]):o=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var a=function(){return e._exporter.export(o,function(_){var l;clearTimeout(i),_.code===B.SUCCESS?r():n((l=_.error)!==null&&l!==void 0?l:new Error("BatchSpanProcessor: span export failed"))})},u=null,s=0,c=o.length;s<c;s++){var f=o[s];f.resource.asyncAttributesPending&&f.resource.waitForAsyncAttributes&&(u??(u=[]),u.push(f.resource.waitForAsyncAttributes()))}u===null?a():Promise.all(u).then(a,function(_){Et(_),n(_)})})})},t.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var r=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(n){e._isExporting=!1,Et(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return r();this._timer===void 0&&(this._timer=setTimeout(function(){return r()},this._scheduledDelayMillis),this._timer,void 0)}},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}(),Po=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rr=function(t){Po(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.onInit(n),i}return e.prototype.onInit=function(r){var n=this;(r==null?void 0:r.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush()},this._pageHideListener=function(){n.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(Lo),bo=8,No=16,Co=function(){function t(){this.generateTraceId=ve(No),this.generateSpanId=ve(bo)}return t}(),ot=Array(32);function ve(t){return function(){for(var r=0;r<t*2;r++)ot[r]=Math.floor(Math.random()*16)+48,ot[r]>=58&&(ot[r]+=39);return String.fromCharCode.apply(null,ot.slice(0,t*2))}}var wo=function(){function t(e,r,n){this._tracerProvider=n;var i=Ao(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Co,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,o,a;r===void 0&&(r={}),n===void 0&&(n=g.active()),r.root&&(n=T.deleteSpan(n));var u=T.getSpan(n);if(ee(n)){p.debug("Instrumentation suppressed, returning Noop Span");var s=T.wrapSpanContext(be);return s}var c=u==null?void 0:u.spanContext(),f=this._idGenerator.generateSpanId(),_,l,O;!c||!T.isSpanContextValid(c)?_=this._idGenerator.generateTraceId():(_=c.traceId,l=c.traceState,O=c.spanId);var h=(i=r.kind)!==null&&i!==void 0?i:Xt.INTERNAL,A=((o=r.links)!==null&&o!==void 0?o:[]).map(function(ie){return{context:ie.context,attributes:ct(ie.attributes)}}),b=ct(r.attributes),C=this._sampler.shouldSample(n,_,e,h,b,A);l=(a=C.traceState)!==null&&a!==void 0?a:l;var vr=C.decision===dt.RECORD_AND_SAMPLED?N.SAMPLED:N.NONE,ne={traceId:_,spanId:f,traceFlags:vr,traceState:l};if(C.decision===dt.NOT_RECORD){p.debug("Recording is off, propagating context in a non-recording span");var s=T.wrapSpanContext(ne);return s}var Tr=ct(Object.assign(b,C.attributes)),yr=new Oo(this,n,e,ne,h,O,A,r.startTime,void 0,Tr);return yr},t.prototype.startActiveSpan=function(e,r,n,i){var o,a,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(o=r,u=n):(o=r,a=n,u=i);var s=a??g.active(),c=this.startSpan(e,o,s),f=T.setSpan(s,c);return g.with(f,u,void 0,c)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}();function Io(){return"unknown_service"}var w=function(){return w=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},w.apply(this,arguments)},Mo=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function u(f){try{c(n.next(f))}catch(_){a(_)}}function s(f){try{c(n.throw(f))}catch(_){a(_)}}function c(f){f.done?o(f.value):i(f.value).then(u,s)}c((n=n.apply(t,e||[])).next())})},xo=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(f){return s([c,f])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Do=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Te=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r==null?void 0:r.then(function(o){return n._attributes=Object.assign({},n._attributes,o),n.asyncAttributesPending=!1,o},function(o){return p.debug("a resource's async attributes promise rejected: %s",o),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[Pi]=Io(),e[zt]=Bt[zt],e[kt]=Bt[kt],e[Kt]=Bt[Kt],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&p.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return Mo(this,void 0,void 0,function(){return xo(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=w(w({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var u,s=Do(a,2),c=s[0],f=s[1];return w(w(w(w({},r._syncAttributes),c),(u=e._syncAttributes)!==null&&u!==void 0?u:e.attributes),f)});return new t(i,o)},t.EMPTY=new t({}),t}(),at=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uo=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=at(this._spanProcessors),o=i.next();!o.done;o=i.next()){var a=o.value;n.push(a.forceFlush())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(u){Promise.all(n).then(function(){u()}).catch(function(s){Et(s||new Error("MultiSpanProcessor: forceFlush failed")),u()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var o=at(this._spanProcessors),a=o.next();!a.done;a=o.next()){var u=a.value;u.onStart(e,r)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=at(this._spanProcessors),o=i.next();!o.done;o=i.next()){var a=o.value;a.onEnd(e)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=at(this._spanProcessors),o=i.next();!o.done;o=i.next()){var a=o.value;n.push(a.shutdown())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(u,s){Promise.all(n).then(function(){u()},s)})},t}(),Bo=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}(),D;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(D||(D={}));var Go=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=lo({},tr(),Ro(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Te.empty(),this.resource=Te.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new rr(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new Bo}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+((n==null?void 0:n.schemaUrl)||"");return this._tracers.has(i)||this._tracers.set(i,new wo({name:e,version:r,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return p.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Uo(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),T.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&g.setGlobalContextManager(e.contextManager),e.propagator&&q.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,a=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),o=D.timeout},e);n.forceFlush().then(function(){clearTimeout(a),o!==D.timeout&&(o=D.resolved,i(o))}).catch(function(u){clearTimeout(a),o=D.error,i(u)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var a=o.filter(function(u){return u!==D.resolved});a.length>0?i(a):n()}).catch(function(o){return i([o])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(v().OTEL_PROPAGATORS)),n=r.map(function(o){var a=e._getPropagator(o);return a||p.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),a}),i=n.reduce(function(o,a){return a&&o.push(a),o},[]);if(i.length!==0)return r.length===1?i[0]:new Ui({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=v().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||p.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new Ji}],["baggage",function(){return new Vn}]]),t._registeredExporters=new Map,t}(),jo=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Vo=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Xo=function(){function t(){this._enabled=!1,this._currentContext=M}return t.prototype._bindFunction=function(e,r){e===void 0&&(e=M);var n=this,i=function(){for(var o=this,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return n.with(e,function(){return r.apply(o,a)})};return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),i},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(e,r){return e===void 0&&(e=this.active()),typeof r=="function"?this._bindFunction(e,r):r},t.prototype.disable=function(){return this._currentContext=M,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=M,this)},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=this._currentContext;this._currentContext=e||M;try{return r.call.apply(r,Vo([n],jo(i),!1))}finally{this._currentContext=a}},t}(),Ho=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fo=function(t){Ho(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;if(r.contextManager)throw"contextManager should be defined in register method not in constructor";if(r.propagator)throw"propagator should be defined in register method not in constructor";return n}return e.prototype.register=function(r){r===void 0&&(r={}),r.contextManager===void 0&&(r.contextManager=new Xo),r.contextManager&&r.contextManager.enable(),t.prototype.register.call(this,r)},e}(Go),d;(function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"})(d||(d={}));function I(t,e){return e in t}function y(t,e,r,n){var i=void 0,o=void 0;I(r,e)&&typeof r[e]=="number"&&(i=r[e]);var a=d.FETCH_START;if(I(r,a)&&typeof r[a]=="number"&&(o=r[a]),i!==void 0&&o!==void 0&&i>=o)return t.addEvent(e,i),t}function ye(t,e){y(t,d.FETCH_START,e),y(t,d.DOMAIN_LOOKUP_START,e),y(t,d.DOMAIN_LOOKUP_END,e),y(t,d.CONNECT_START,e),I(e,"name")&&e.name.startsWith("https:")&&y(t,d.SECURE_CONNECTION_START,e),y(t,d.CONNECT_END,e),y(t,d.REQUEST_START,e),y(t,d.RESPONSE_START,e),y(t,d.RESPONSE_END,e);var r=e[d.ENCODED_BODY_SIZE];r!==void 0&&t.setAttribute(yi,r);var n=e[d.DECODED_BODY_SIZE];n!==void 0&&r!==n&&t.setAttribute(gi,n)}function nr(t,e){if(t.nodeType===Node.DOCUMENT_NODE)return"/";var r=zo(t,e);if(e&&r.indexOf("@id")>0)return r;var n="";return t.parentNode&&(n+=nr(t.parentNode,!1)),n+=r,n}function ko(t){if(!t.parentNode)return 0;var e=[t.nodeType];t.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);var r=Array.from(t.parentNode.childNodes);return r=r.filter(function(n){var i=n.localName;return e.indexOf(n.nodeType)>=0&&i===t.localName}),r.length>=1?r.indexOf(t)+1:0}function zo(t,e){var r=t.nodeType,n=ko(t),i="";if(r===Node.ELEMENT_NODE){var o=t.getAttribute("id");if(e&&o)return'//*[@id="'+o+'"]';i=t.localName}else if(r===Node.TEXT_NODE||r===Node.CDATA_SECTION_NODE)i="text()";else if(r===Node.COMMENT_NODE)i="comment()";else return"";return i&&n>1?"/"+i+"["+n+"]":"/"+i}var Ko=function(){function t(){}return t.prototype.emit=function(e){},t}(),Yo=function(){function t(){}return t.prototype.getLogger=function(e,r,n){return new Ko},t}(),ge=new Yo,$o=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},ut=Symbol.for("io.opentelemetry.js.api.logs"),$=$o;function Wo(t,e,r){return function(n){return n===t?e:r}}var Oe=1,Zo=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalLoggerProvider=function(e){return $[ut]?this.getLoggerProvider():($[ut]=Wo(Oe,e,ge),e)},t.prototype.getLoggerProvider=function(){var e,r;return(r=(e=$[ut])===null||e===void 0?void 0:e.call($,Oe))!==null&&r!==void 0?r:ge},t.prototype.getLogger=function(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)},t.prototype.disable=function(){delete $[ut]},t}(),ir=Zo.getInstance();function Qo(t,e,r,n){for(var i=0,o=t.length;i<o;i++){var a=t[i];e&&a.setTracerProvider(e),r&&a.setMeterProvider(r),n&&a.setLoggerProvider&&a.setLoggerProvider(n),a.getConfig().enabled||a.enable()}}function qo(t){t.forEach(function(e){return e.disable()})}function Jo(t){var e,r,n=t.tracerProvider||T.getTracerProvider(),i=t.meterProvider||Ie.getMeterProvider(),o=t.loggerProvider||ir.getLoggerProvider(),a=(r=(e=t.instrumentations)===null||e===void 0?void 0:e.flat())!==null&&r!==void 0?r:[];return Qo(a,n,i,o),function(){qo(a)}}function $t(t){return typeof t=="function"}var m=console.error.bind(console);function W(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function it(t){t&&t.logger&&($t(t.logger)?m=t.logger:m("new logger isn't a function, not replacing"))}function or(t,e,r){if(!t||!t[e]){m("no original function "+e+" to wrap");return}if(!r){m("no wrapper function"),m(new Error().stack);return}if(!$t(t[e])||!$t(r)){m("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return W(i,"__original",n),W(i,"__unwrap",function(){t[e]===i&&W(t,e,n)}),W(i,"__wrapped",!0),W(t,e,i),i}function ta(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{m("must provide one or more modules to patch"),m(new Error().stack);return}if(!(e&&Array.isArray(e))){m("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){or(n,i,r)})})}function ar(t,e){if(!t||!t[e]){m("no function to unwrap."),m(new Error().stack);return}if(!t[e].__unwrap)m("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function ea(t,e){if(t)Array.isArray(t)||(t=[t]);else{m("must provide one or more modules to patch"),m(new Error().stack);return}if(!(e&&Array.isArray(e))){m("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){ar(r,n)})})}it.wrap=or;it.massWrap=ta;it.unwrap=ar;it.massUnwrap=ea;var st=it,gt=function(){return gt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gt.apply(this,arguments)},ra=function(){function t(e,r,n){this.instrumentationName=e,this.instrumentationVersion=r,this._wrap=st.wrap,this._unwrap=st.unwrap,this._massWrap=st.massWrap,this._massUnwrap=st.massUnwrap,this._config=gt({enabled:!0},n),this._diag=p.createComponentLogger({namespace:e}),this._tracer=T.getTracer(e,r),this._meter=Ie.getMeter(e,r),this._logger=ir.getLogger(e,r),this._updateMetricInstruments()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(t.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),t.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},t.prototype.getModuleDefinitions=function(){var e,r=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(r)?r:[r]},t.prototype._updateMetricInstruments=function(){},t.prototype.getConfig=function(){return this._config},t.prototype.setConfig=function(e){this._config=gt({},e)},t.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),t.prototype._runSpanCustomizationHook=function(e,r,n,i){if(e)try{e(n,i)}catch(o){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},o)}},t}(),na=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(t){na(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return o._config.enabled&&o.enable(),o}return e}(ra);function Se(t,e,r){var n,i;try{i=t()}catch(o){n=o}finally{if(e(n,i),n&&!r)throw n;return i}}function S(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var F;(function(t){t.EVENT_TYPE="event_type",t.TARGET_ELEMENT="target_element",t.TARGET_XPATH="target_xpath",t.HTTP_URL="http.url"})(F||(F={}));var me="0.39.0",ia="@opentelemetry/instrumentation-user-interaction",oa=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aa="OT_ZONE_CONTEXT",ua="Navigation:",sa=["click"];function ca(){return!1}var fa=function(t){oa(e,t);function e(r){r===void 0&&(r={});var n,i=t.call(this,ia,me,r)||this;return i.version=me,i.moduleName="user-interaction",i._spansData=new WeakMap,i._wrappedListeners=new WeakMap,i._eventsSpanMap=new WeakMap,i._eventNames=new Set((n=r==null?void 0:r.eventNames)!==null&&n!==void 0?n:sa),i._shouldPreventSpanCreation=typeof(r==null?void 0:r.shouldPreventSpanCreation)=="function"?r.shouldPreventSpanCreation:ca,i}return e.prototype.init=function(){},e.prototype._checkForTimeout=function(r,n){var i=this._spansData.get(n);i&&(r.source==="setTimeout"?i.hrTimeLastTimeout=ke():r.source!=="Promise.then"&&r.source!=="setTimeout"&&(i.hrTimeLastTimeout=void 0))},e.prototype._allowEventName=function(r){return this._eventNames.has(r)},e.prototype._createSpan=function(r,n,i){var o;if(r instanceof HTMLElement&&r.getAttribute&&!r.hasAttribute("disabled")&&this._allowEventName(n)){var a=nr(r,!0);try{var u=this.tracer.startSpan(n,{attributes:(o={},o[F.EVENT_TYPE]=n,o[F.TARGET_ELEMENT]=r.tagName,o[F.TARGET_XPATH]=a,o[F.HTTP_URL]=window.location.href,o)},i?T.setSpan(g.active(),i):void 0);return this._shouldPreventSpanCreation(n,r,u)===!0?void 0:(this._spansData.set(u,{taskCount:0}),u)}catch(s){this._diag.error("failed to start create new user interaction span",s)}}},e.prototype._decrementTask=function(r){var n=this._spansData.get(r);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(r,n.hrTimeLastTimeout))},e.prototype._getCurrentSpan=function(r){var n=r.get(aa);return n&&T.getSpan(n)},e.prototype._incrementTask=function(r){var n=this._spansData.get(r);n&&n.taskCount++},e.prototype.addPatchedListener=function(r,n,i,o){var a=this._wrappedListeners.get(i);a||(a=new Map,this._wrappedListeners.set(i,a));var u=a.get(n);return u||(u=new Map,a.set(n,u)),u.has(r)?!1:(u.set(r,o),!0)},e.prototype.removePatchedListener=function(r,n,i){var o=this._wrappedListeners.get(i);if(o){var a=o.get(n);if(a){var u=a.get(r);return u&&(a.delete(r),a.size===0&&(o.delete(n),o.size===0&&this._wrappedListeners.delete(i))),u}}},e.prototype._invokeListener=function(r,n,i){return typeof r=="function"?r.apply(n,i):r.handleEvent(i[0])},e.prototype._patchAddEventListener=function(){var r=this;return function(n){return function(o,a,u){if(!a)return n.call(this,o,a,u);var s=u&&typeof u=="object"&&u.once,c=function(){for(var f=this,_=[],l=0;l<arguments.length;l++)_[l]=arguments[l];var O,h=_[0],A=h==null?void 0:h.target;h&&(O=r._eventsSpanMap.get(h)),s&&r.removePatchedListener(this,o,a);var b=r._createSpan(A,o,O);return b?(h&&r._eventsSpanMap.set(h,b),g.with(T.setSpan(g.active(),b),function(){var C=r._invokeListener(a,f,_);return b.end(),C})):r._invokeListener(a,this,_)};if(r.addPatchedListener(this,o,a,c))return n.call(this,o,c,u)}}},e.prototype._patchRemoveEventListener=function(){var r=this;return function(n){return function(o,a,u){var s=r.removePatchedListener(this,o,a);return s?n.call(this,o,s,u):n.call(this,o,a,u)}}},e.prototype._getPatchableEventTargets=function(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]},e.prototype._patchHistoryApi=function(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())},e.prototype._patchHistoryMethod=function(){var r=this;return function(n){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=""+location.pathname+location.hash+location.search,s=n.apply(this,o),c=""+location.pathname+location.hash+location.search;return u!==c&&r._updateInteractionName(c),s}}},e.prototype._unpatchHistoryApi=function(){S(history.replaceState)&&this._unwrap(history,"replaceState"),S(history.pushState)&&this._unwrap(history,"pushState"),S(history.back)&&this._unwrap(history,"back"),S(history.forward)&&this._unwrap(history,"forward"),S(history.go)&&this._unwrap(history,"go")},e.prototype._updateInteractionName=function(r){var n=T.getSpan(g.active());n&&typeof n.updateName=="function"&&n.updateName(ua+" "+r)},e.prototype._patchZoneCancelTask=function(){var r=this;return function(n){return function(o){var a=Zone.current,u=r._getCurrentSpan(a);return u&&r._shouldCountTask(o,a)&&r._decrementTask(u),n.call(this,o)}}},e.prototype._patchZoneScheduleTask=function(){var r=this;return function(n){return function(o){var a=Zone.current,u=r._getCurrentSpan(a);return u&&r._shouldCountTask(o,a)&&(r._incrementTask(u),r._checkForTimeout(o,u)),n.call(this,o)}}},e.prototype._patchZoneRunTask=function(){var r=this;return function(n){return function(o,a,u){var s=Array.isArray(u)&&u[0]instanceof Event?u[0]:void 0,c=s==null?void 0:s.target,f,_=this;if(c){if(f=r._createSpan(c,o.eventName),f)return r._incrementTask(f),_.run(function(){try{return g.with(T.setSpan(g.active(),f),function(){var l=Zone.current;return o._zone=l,n.call(l,o,a,u)})}finally{r._decrementTask(f)}})}else f=r._getCurrentSpan(_);try{return n.call(_,o,a,u)}finally{f&&r._shouldCountTask(o,_)&&r._decrementTask(f)}}}},e.prototype._shouldCountTask=function(r,n){if(r._zone&&(n=r._zone),!n||!r.data||r.data.isPeriodic)return!1;var i=this._getCurrentSpan(n);return!i||!this._spansData.get(i)?!1:r.type==="macroTask"||r.type==="microTask"},e.prototype._tryToEndSpan=function(r,n){if(r){var i=this._spansData.get(r);i&&(r.end(n),this._spansData.delete(r))}},e.prototype.enable=function(){var r=this,n=this.getZoneWithPrototype();if(this._diag.debug("applying patch to",this.moduleName,this.version,"zone:",!!n),n)S(n.prototype.runTask)&&(this._unwrap(n.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),S(n.prototype.scheduleTask)&&(this._unwrap(n.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),S(n.prototype.cancelTask)&&(this._unwrap(n.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(n.prototype,"runTask",this._patchZoneRunTask()),this._wrap(n.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(n.prototype,"cancelTask",this._patchZoneCancelTask());else{this._zonePatched=!1;var i=this._getPatchableEventTargets();i.forEach(function(o){S(o.addEventListener)&&(r._unwrap(o,"addEventListener"),r._diag.debug("removing previous patch from method addEventListener")),S(o.removeEventListener)&&(r._unwrap(o,"removeEventListener"),r._diag.debug("removing previous patch from method removeEventListener")),r._wrap(o,"addEventListener",r._patchAddEventListener()),r._wrap(o,"removeEventListener",r._patchRemoveEventListener())})}this._patchHistoryApi()},e.prototype.disable=function(){var r=this,n=this.getZoneWithPrototype();if(this._diag.debug("removing patch from",this.moduleName,this.version,"zone:",!!n),n&&this._zonePatched)S(n.prototype.runTask)&&this._unwrap(n.prototype,"runTask"),S(n.prototype.scheduleTask)&&this._unwrap(n.prototype,"scheduleTask"),S(n.prototype.cancelTask)&&this._unwrap(n.prototype,"cancelTask");else{var i=this._getPatchableEventTargets();i.forEach(function(o){S(o.addEventListener)&&r._unwrap(o,"addEventListener"),S(o.removeEventListener)&&r._unwrap(o,"removeEventListener")})}this._unpatchHistoryApi()},e.prototype.getZoneWithPrototype=function(){var r=window;return r.Zone},e}(ur),J;(function(t){t.DOCUMENT_LOAD="documentLoad",t.DOCUMENT_FETCH="documentFetch",t.RESOURCE_FETCH="resourceFetch"})(J||(J={}));var _a="0.39.0",la="@opentelemetry/instrumentation-document-load",Ot;(function(t){t.FIRST_PAINT="firstPaint",t.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(Ot||(Ot={}));var pa=function(){var t,e,r={},n=(e=(t=L).getEntriesByType)===null||e===void 0?void 0:e.call(t,"navigation")[0];if(n){var i=Object.values(d);i.forEach(function(u){if(I(n,u)){var s=n[u];typeof s=="number"&&(r[u]=s)}})}else{var o=L,a=o.timing;if(a){var i=Object.values(d);i.forEach(function(s){if(I(a,s)){var c=a[s];typeof c=="number"&&(r[s]=c)}})}}return r},Ae={"first-paint":Ot.FIRST_PAINT,"first-contentful-paint":Ot.FIRST_CONTENTFUL_PAINT},da=function(t){var e,r,n=(r=(e=L).getEntriesByType)===null||r===void 0?void 0:r.call(e,"paint");n&&n.forEach(function(i){var o=i.name,a=i.startTime;I(Ae,o)&&t.addEvent(Ae[o],a)})},ha=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ea=function(t){ha(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,la,_a,r)||this;return n.component="document-load",n.version="1",n.moduleName=n.component,n}return e.prototype.init=function(){},e.prototype._onDocumentLoaded=function(){var r=this;window.setTimeout(function(){r._collectPerformance()})},e.prototype._addResourcesSpans=function(r){var n=this,i,o,a=(o=(i=L).getEntriesByType)===null||o===void 0?void 0:o.call(i,"resource");a&&a.forEach(function(u){n._initResourceSpan(u,r)})},e.prototype._collectPerformance=function(){var r=this,n=Array.from(document.getElementsByTagName("meta")).find(function(a){return a.getAttribute("name")===lt}),i=pa(),o=n&&n.content||"";g.with(q.extract(M,{traceparent:o}),function(){var a,u=r._startSpan(J.DOCUMENT_LOAD,d.FETCH_START,i);u&&(g.with(T.setSpan(g.active(),u),function(){var s=r._startSpan(J.DOCUMENT_FETCH,d.FETCH_START,i);s&&(s.setAttribute(Ut,location.href),g.with(T.setSpan(g.active(),s),function(){var c;r._getConfig().ignoreNetworkEvents||ye(s,i),r._addCustomAttributesOnSpan(s,(c=r._getConfig().applyCustomAttributesOnSpan)===null||c===void 0?void 0:c.documentFetch),r._endSpan(s,d.RESPONSE_END,i)}))}),u.setAttribute(Ut,location.href),u.setAttribute(Ti,navigator.userAgent),r._addResourcesSpans(u),r._getConfig().ignoreNetworkEvents||(y(u,d.FETCH_START,i),y(u,d.UNLOAD_EVENT_START,i),y(u,d.UNLOAD_EVENT_END,i),y(u,d.DOM_INTERACTIVE,i),y(u,d.DOM_CONTENT_LOADED_EVENT_START,i),y(u,d.DOM_CONTENT_LOADED_EVENT_END,i),y(u,d.DOM_COMPLETE,i),y(u,d.LOAD_EVENT_START,i),y(u,d.LOAD_EVENT_END,i)),r._getConfig().ignorePerformancePaintEvents||da(u),r._addCustomAttributesOnSpan(u,(a=r._getConfig().applyCustomAttributesOnSpan)===null||a===void 0?void 0:a.documentLoad),r._endSpan(u,d.LOAD_EVENT_END,i))})},e.prototype._endSpan=function(r,n,i){r&&(I(i,n)?r.end(i[n]):r.end())},e.prototype._initResourceSpan=function(r,n){var i,o=this._startSpan(J.RESOURCE_FETCH,d.FETCH_START,r,n);o&&(o.setAttribute(Ut,r.name),this._getConfig().ignoreNetworkEvents||ye(o,r),this._addCustomAttributesOnResourceSpan(o,r,(i=this._getConfig().applyCustomAttributesOnSpan)===null||i===void 0?void 0:i.resourceFetch),this._endSpan(o,d.RESPONSE_END,r))},e.prototype._startSpan=function(r,n,i,o){if(I(i,n)&&typeof i[n]=="number"){var a=this.tracer.startSpan(r,{startTime:i[n]},o?T.setSpan(g.active(),o):void 0);return a}},e.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},e.prototype._getConfig=function(){return this._config},e.prototype._addCustomAttributesOnSpan=function(r,n){var i=this;n&&Se(function(){return n(r)},function(o){o&&i._diag.error("addCustomAttributesOnSpan",o)},!0)},e.prototype._addCustomAttributesOnResourceSpan=function(r,n,i){var o=this;i&&Se(function(){return i(r,n)},function(a){a&&o._diag.error("addCustomAttributesOnResourceSpan",a)},!0)},e.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},e.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},e}(ur),va=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},sr=1e4,Ta=5,ya=1e3,ga=5e3,Oa=1.5;function Sa(t){t===void 0&&(t={});var e={};return Object.entries(t).forEach(function(r){var n=va(r,2),i=n[0],o=n[1];typeof o<"u"?e[i]=String(o):p.warn('Header "'+i+'" has invalid value ('+o+") and will be ignored")}),e}function ma(t,e){return t.endsWith("/")||(t=t+"/"),t+e}function Aa(t){try{var e=new URL(t);return e.pathname===""&&(e.pathname=e.pathname+"/"),e.toString()}catch{return p.warn("Could not parse export URL: '"+t+"'"),t}}function Ra(t){return typeof t=="number"?t<=0?cr(t,sr):t:La()}function La(){var t,e=Number((t=v().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&t!==void 0?t:v().OTEL_EXPORTER_OTLP_TIMEOUT);return e<=0?cr(e,sr):e}function cr(t,e){return p.warn("Timeout must be greater than 0",t),e}function Pa(t){var e=[429,502,503,504];return e.includes(t)}function ba(t){if(t==null)return-1;var e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var r=new Date(t).getTime()-Date.now();return r>=0?r:0}var Na=function(){function t(e){e===void 0&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),typeof e.hostname=="string"&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Je(this._shutdown,this),this._concurrencyLimit=typeof e.concurrencyLimit=="number"?e.concurrencyLimit:30,this.timeoutMillis=Ra(e.timeoutMillis),this.onInit(e)}return t.prototype.export=function(e,r){if(this._shutdownOnce.isCalled){r({code:B.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:B.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then(function(){r({code:B.SUCCESS})}).catch(function(n){r({code:B.FAILED,error:n})})},t.prototype._export=function(e){var r=this;return new Promise(function(n,i){try{p.debug("items to be sent",e),r.send(e,n,i)}catch(o){i(o)}})},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then(function(){})},t.prototype._shutdown=function(){return p.debug("shutdown started"),this.onShutdown(),this.forceFlush()},t}(),Ca=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z=function(t){Ca(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.name="OTLPExporterError",o.data=i,o.code=n,o}return e}(Error),St=function(){return St=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},St.apply(this,arguments)},wa=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};function Ia(t,e,r,n,i){if(navigator.sendBeacon(e,new Blob([t],r)))p.debug("sendBeacon - can send",t),n();else{var o=new Z("sendBeacon - cannot send "+t);i(o)}}function Ma(t,e,r,n,i,o){var a,u,s=!1,c=setTimeout(function(){if(clearTimeout(a),s=!0,u.readyState===XMLHttpRequest.DONE){var _=new Z("Request Timeout");o(_)}else u.abort()},n),f=function(_,l){_===void 0&&(_=Ta),l===void 0&&(l=ya),u=new XMLHttpRequest,u.open("POST",e);var O={Accept:"application/json","Content-Type":"application/json"};Object.entries(St(St({},O),r)).forEach(function(h){var A=wa(h,2),b=A[0],C=A[1];u.setRequestHeader(b,C)}),u.send(t),u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE&&s===!1)if(u.status>=200&&u.status<=299)p.debug("xhr success",t),i(),clearTimeout(c),clearTimeout(a);else if(u.status&&Pa(u.status)&&_>0){var h=void 0;l=Oa*l,u.getResponseHeader("Retry-After")?h=ba(u.getResponseHeader("Retry-After")):h=Math.round(Math.random()*(ga-l)+l),a=setTimeout(function(){f(_-1,l)},h)}else{var A=new Z("Failed to export with XHR (status: "+u.status+")",u.status);o(A),clearTimeout(c),clearTimeout(a)}},u.onabort=function(){if(s){var h=new Z("Request Timeout");o(h)}clearTimeout(c),clearTimeout(a)},u.onerror=function(){if(s){var h=new Z("Request Timeout");o(h)}clearTimeout(c),clearTimeout(a)}};f()}var xa=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mt=function(){return mt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},mt.apply(this,arguments)},Da=function(t){xa(e,t);function e(r,n,i){r===void 0&&(r={});var o=t.call(this,r)||this;return o._useXHR=!1,o._serializer=n,o._contentType=i,o._useXHR=!!r.headers||typeof navigator.sendBeacon!="function",o._useXHR?o._headers=Object.assign({},Sa(r.headers),Ue(v().OTEL_EXPORTER_OTLP_HEADERS)):o._headers={},o}return e.prototype.onInit=function(){},e.prototype.onShutdown=function(){},e.prototype.send=function(r,n,i){var o=this,a;if(this._shutdownOnce.isCalled){p.debug("Shutdown already started. Cannot send objects");return}var u=(a=this._serializer.serializeRequest(r))!==null&&a!==void 0?a:new Uint8Array,s=new Promise(function(f,_){o._useXHR?Ma(u,o.url,mt(mt({},o._headers),{"Content-Type":o._contentType}),o.timeoutMillis,f,_):Ia(u,o.url,{type:o._contentType},f,_)}).then(n,i);this._sendingPromises.push(s);var c=function(){var f=o._sendingPromises.indexOf(s);o._sendingPromises.splice(f,1)};s.then(c,c)},e}(Na);function fr(t){var e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function Ua(t){var e=Number(BigInt.asUintN(32,t)),r=Number(BigInt.asUintN(32,t>>BigInt(32)));return{low:e,high:r}}function _r(t){var e=fr(t);return Ua(e)}function Ba(t){var e=fr(t);return e.toString()}var Ga=typeof BigInt<"u"?Ba:xi;function Re(t){return t}function lr(t){if(t!==void 0)return re(t)}var ja={encodeHrTime:_r,encodeSpanContext:re,encodeOptionalSpanContext:lr};function Va(t){var e,r;if(t===void 0)return ja;var n=(e=t.useLongBits)!==null&&e!==void 0?e:!0,i=(r=t.useHex)!==null&&r!==void 0?r:!1;return{encodeHrTime:n?_r:Ga,encodeSpanContext:i?Re:re,encodeOptionalSpanContext:i?Re:lr}}var Xa=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};function Ha(t){return{name:t.name,version:t.version}}function Pt(t){return Object.keys(t).map(function(e){return pr(e,t[e])})}function pr(t,e){return{key:t,value:dr(e)}}function dr(t){var e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(dr)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(function(r){var n=Xa(r,2),i=n[0],o=n[1];return pr(i,o)})}}:{}}function Fa(t,e){var r,n=t.spanContext(),i=t.status;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:e.encodeOptionalSpanContext(t.parentSpanId),traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:Pt(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(function(o){return za(o,e)}),droppedEventsCount:t.droppedEventsCount,status:{code:i.code,message:i.message},links:t.links.map(function(o){return ka(o,e)}),droppedLinksCount:t.droppedLinksCount}}function ka(t,e){var r;return{attributes:t.attributes?Pt(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:(r=t.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function za(t,e){return{attributes:t.attributes?Pt(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}function Ka(t){return{attributes:Pt(t.attributes),droppedAttributesCount:0}}var Ya=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$a=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};function Wa(t,e){var r=Va(e);return{resourceSpans:Qa(t,r)}}function Za(t){var e,r,n=new Map;try{for(var i=Ya(t),o=i.next();!o.done;o=i.next()){var a=o.value,u=n.get(a.resource);u||(u=new Map,n.set(a.resource,u));var s=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),c=u.get(s);c||(c=[],u.set(s,c)),c.push(a)}}catch(f){e={error:f}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function Qa(t,e){for(var r=Za(t),n=[],i=r.entries(),o=i.next();!o.done;){for(var a=$a(o.value,2),u=a[0],s=a[1],c=[],f=s.values(),_=f.next();!_.done;){var l=_.value;if(l.length>0){var O=l.map(function(A){return Fa(A,e)});c.push({scope:Ha(l[0].instrumentationLibrary),spans:O,schemaUrl:l[0].instrumentationLibrary.schemaUrl})}_=f.next()}var h={resource:Ka(u),scopeSpans:c,schemaUrl:void 0};n.push(h),o=i.next()}return n}var qa={serializeRequest:function(t){var e=Wa(t,{useHex:!0,useLongBits:!1}),r=new TextEncoder;return r.encode(JSON.stringify(e))},deserializeResponse:function(t){var e=new TextDecoder;return JSON.parse(e.decode(t))}},Ja=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hr="v1/traces",tu="http://localhost:4318/"+hr,eu=function(t){Ja(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r,qa,"application/json")||this;return n._headers=Object.assign(n._headers,Ue(v().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return e.prototype.getDefaultUrl=function(r){return typeof r.url=="string"?r.url:v().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?Aa(v().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):v().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?ma(v().OTEL_EXPORTER_OTLP_ENDPOINT,hr):tu},e}(Da);const Er=new Fo,ru={url:"http://localhost:3000/v1/traces",headers:{},concurrencyLimit:10},nu=new eu(ru);Er.addSpanProcessor(new rr(nu,{maxQueueSize:100,maxExportBatchSize:10,scheduledDelayMillis:5e3,exportTimeoutMillis:3e4}));Er.register();Jo({instrumentations:[new Ea,new fa({eventNames:["submit","click","keypress"]})]});const iu=document.getElementsByTagName("body")[0],ou=document.getElementsByTagName("button")[0];iu.addEventListener("click",()=>{console.log("body was clicked")});ou.addEventListener("click",()=>{console.log("button was clicked")});
